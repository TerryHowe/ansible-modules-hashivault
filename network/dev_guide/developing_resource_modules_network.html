

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Developing network resource modules &mdash; Ansible Documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://docs.ansible.com/ansible/latest/network/dev_guide/developing_resource_modules_network.html"/>
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/ansible.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/ansible.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Network connection plugins" href="developing_plugins_network.html" />
    <link rel="prev" title="Developer Guide for Network Automation" href="index.html" /> <!---- extra head elements for Ansible beyond RTD Sphinx Theme --->
<script type="text/javascript" src="//www.redhat.com/dtm.js"></script>
<!-- <meta class="swiftype" name="published_at" data-type="date" content="2017-12-13" /> -->
<meta class="swiftype" name="version" data-type="string" content="2.9">

<!-- Google Tag Manager Data Layer -->
<script>
 dataLayer = [];
</script>
<!-- End Google Tag Manager Data Layer -->

<script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script> 
</head>

<body class="wy-body-for-nav">
   <!---- extra body elements for Ansible beyond RTD Sphinx Theme --->
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
<!-- End Google Tag Manager -->

  <div class="DocSite-globalNav ansibleNav">
      <ul>
          <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
          <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
          <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
          <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
          <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
      </ul>
  </div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../../_static/images/logo_invert.png"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">
    Documentation
  </div>
</a> 
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Ansible
          

          
          </a>

          
            
            
              <div class="version">
                2.9
              </div>
            
          

          <!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    <div class="version-dropdown">
      <select class="version-list" id="version-list" onchange="javascript:location.href = this.value;">
        <script> x = document.getElementById("version-list"); </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "latest";
            if ( "latest" == "2.9" ) {
              option.selected = true;
            }
            if (current_url.search("2.9") > -1) {
              option.value = current_url.replace("2.9","latest");
            } else {
              option.value = current_url.replace("latest","latest");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "2.8";
            if ( "2.8" == "2.9" ) {
              option.selected = true;
            }
            if (current_url.search("2.9") > -1) {
              option.value = current_url.replace("2.9","2.8");
            } else {
              option.value = current_url.replace("latest","2.8");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "2.7";
            if ( "2.7" == "2.9" ) {
              option.selected = true;
            }
            if (current_url.search("2.9") > -1) {
              option.value = current_url.replace("2.9","2.7");
            } else {
              option.value = current_url.replace("latest","2.7");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "devel";
            if ( "devel" == "2.9" ) {
              option.selected = true;
            }
            if (current_url.search("2.9") > -1) {
              option.value = current_url.replace("2.9","devel");
            } else {
              option.value = current_url.replace("latest","devel");
            }
            x.add(option);
          </script>
        
      </select>
    </div>
  
</div>
          
<div role="search">
<!--  <form id="rtd-search-form" class="wy-form" action="../../search.html" -->
  <form id="rtd-search-form" class="wy-form"  method="get">
    <input type="text" class="st-default-search-input" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation, Upgrade &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation_guide/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../porting_guides/porting_guides.html">Ansible Porting Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Using Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/index.html">User Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing to Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Ansible Community Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Extending Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dev_guide/index.html">Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Common Ansible Scenarios</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../scenario_guides/cloud_guides.html">Public Cloud Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scenario_guides/network_guides.html">Network Technology Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scenario_guides/virt_guides.html">Virtualization and Containerization Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Ansible for Network Automation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Ansible for Network Automation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting_started/index.html">Getting Started with Ansible for Network Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/index.html">Advanced Topics with Ansible for Network Automation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Developer Guide for Network Automation</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Developing network resource modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#accessing-the-resource-module-builder">Accessing the resource module builder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-model">Creating a model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-the-resource-module-builder">Using the resource module builder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#resource-module-structure-and-workflow">Resource module structure and workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#developer-notes">Developer notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="developing_plugins_network.html">Network connection plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="documenting_modules_network.html">Documenting new network platforms</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Ansible Galaxy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../galaxy/user_guide.html">Galaxy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../galaxy/dev_guide.html">Galaxy Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference &amp; Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules/modules_by_category.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/playbooks_keywords.html">Playbook Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/common_return_values.html">Return Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/config.html">Ansible Configuration Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/general_precedence.html">Controlling how Ansible behaves: precedence rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/YAMLSyntax.html">YAML Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/python_3_support.html">Python 3 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/interpreter_discovery.html">Interpreter Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/release_and_maintenance.html">Release and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/test_strategies.html">Testing Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_guide/testing/sanity/index.html">Sanity Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/module_utils.html">Ansible Reference: Module Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/special_variables.html">Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/tower.html">Red Hat Ansible Tower</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference_appendices/logging.html">Logging Ansible output</a></li>
</ul>
<p class="caption"><span class="caption-text">Roadmaps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap/index.html">Ansible Roadmap</a></li>
</ul>

            
          
        </div>
        
         <!-- extra nav elements for Ansible beyond RTD Sphinx Theme --->
<!-- changeable widget links to tower - do not change as image controlled by Ansible-->
<div id="sideBanner">
  <br/>
  <a href="https://www.ansible.com/docs-left?utm_source=docs">
    <img style="border-width:0px;" src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-left-rail.png" />
  </a>
  <br/><br/><br/>
</div>
      </div>
    </nav>
  </div>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Ansible</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          
















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Ansible for Network Automation</a> &raquo;</li>
        
          <li><a href="index.html">Developer Guide for Network Automation</a> &raquo;</li>
        
      <li>Developing network resource modules</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <!-- Ansible-specific additions for modules etc -->
                
                  <a href="https://github.com/ansible/ansible/edit/devel/docs/docsite/rst/network/dev_guide/developing_resource_modules_network.rst?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> Edit on GitHub</a>
                
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <!--- Based on sphinx versionwarning extension. Extension currently only works on READTHEDOCS -->
  <script>
    // Create a banner if we're not on the official docs site
    if (location.host == "docs.testing.ansible.com") {
      document.write('<div id="testing_banner_id" class="admonition important">');
      para = document.createElement('p');
      banner_text=document.createTextNode("This is a testing site. For the official docs go to https://docs.ansible.com/");
      para.appendChild(banner_text);
      element = document.getElementById('testing_banner_id');
      element.appendChild(para);
      document.write('</div>');
    }

    // Create a banner if we're not the latest version
    current_url = window.location.href;
    if ((current_url.search("latest") > -1) || (current_url.search("/2.9/") > -1)) {
     // no banner for latest release
    } else if (current_url.search("devel") > -1) {
      document.write('<div id="banner_id" class="admonition caution">');
      para = document.createElement('p');
      banner_text=document.createTextNode("You are reading the *devel* version of the Ansible documentation - this version is not guaranteed stable. Use the version selection to the left if you want the latest stable released version.");
      para.appendChild(banner_text);
      element = document.getElementById('banner_id');
      element.appendChild(para);
      document.write('</div>');
    } else {
      document.write('<div id="banner_id" class="admonition caution">');
      para = document.createElement('p');
      banner_text=document.createTextNode("You are reading an older version of the Ansible documentation. Use the version selection to the left if you want the latest stable released version.");
      para.appendChild(banner_text);
      element = document.getElementById('banner_id');
      element.appendChild(para);
      document.write('</div>');
    }
  </script>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="developing-network-resource-modules">
<span id="developing-resource-modules"></span><h1>Developing network resource modules<a class="headerlink" href="#developing-network-resource-modules" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#accessing-the-resource-module-builder" id="id1">Accessing the resource module builder</a></p></li>
<li><p><a class="reference internal" href="#creating-a-model" id="id2">Creating a model</a></p></li>
<li><p><a class="reference internal" href="#using-the-resource-module-builder" id="id3">Using the resource module builder</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id4">Examples</a></p>
<ul>
<li><p><a class="reference internal" href="#collection-directory-layout" id="id5">Collection directory layout</a></p></li>
<li><p><a class="reference internal" href="#role-directory-layout" id="id6">Role directory layout</a></p></li>
<li><p><a class="reference internal" href="#using-the-collection" id="id7">Using the collection</a></p></li>
<li><p><a class="reference internal" href="#using-the-role" id="id8">Using the role</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#resource-module-structure-and-workflow" id="id9">Resource module structure and workflow</a></p></li>
<li><p><a class="reference internal" href="#developer-notes" id="id10">Developer notes</a></p></li>
</ul>
</div>
<p>The resource module builder is an Ansible Playbook that helps developers scaffold and maintain an Ansible network resource module.</p>
<p>The resource module builder has the following capabilities:</p>
<ul class="simple">
<li><p>Uses a defined model to scaffold a resource module directory layout and initial class files.</p></li>
<li><p>Scaffolds either an Ansible role or a collection.</p></li>
<li><p>Subsequent uses of the resource module builder will only replace the module arspec and file containing the module docstring.</p></li>
<li><p>Allows you to store complex examples along side the model in the same directory.</p></li>
<li><p>Maintains the model as the source of truth for the module and use resource module builder to update the source files as needed.</p></li>
<li><p>Generates working sample modules for both <code class="docutils literal notranslate"><span class="pre">&lt;network_os&gt;_&lt;resource&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;network_os&gt;_facts</span></code>.</p></li>
</ul>
<div class="section" id="accessing-the-resource-module-builder">
<h2><a class="toc-backref" href="#id1">Accessing the resource module builder</a><a class="headerlink" href="#accessing-the-resource-module-builder" title="Permalink to this headline">¶</a></h2>
<p>To access the resource module builder:</p>
<ol class="arabic simple">
<li><p>clone the github repository:</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/ansible-network/resource_module_builder.git
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Install the requirements:</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -r requirements.txt
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="creating-a-model">
<h2><a class="toc-backref" href="#id2">Creating a model</a><a class="headerlink" href="#creating-a-model" title="Permalink to this headline">¶</a></h2>
<p>You must create a model for your new resource. The resource module builder uses this model to create:</p>
<ul class="simple">
<li><p>The scaffold for a new module</p></li>
<li><p>The argspec for the new module</p></li>
<li><p>The docstring for the new module</p></li>
</ul>
<p>The model is then the single source of truth for both the argspec and docstring, keeping them in sync. Use the resource module builder to generate this scaffolding. For any subsequent updates to the module, update the model first and use the resource module builder to update the module argspec and docstring.</p>
<p>For example, the resource model builder includes the <code class="docutils literal notranslate"><span class="pre">myos_interfaces.yml</span></code> sample in the <code class="file docutils literal notranslate"><span class="pre">models</span></code> directory, as seen below:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">GENERATOR_VERSION</span><span class="p">:</span> <span class="s">&#39;1.0&#39;</span>
<span class="nt">ANSIBLE_METADATA</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">{</span>
        <span class="no">&#39;metadata_version&#39;: &#39;1.1&#39;,</span>
        <span class="no">&#39;status&#39;: [&#39;preview&#39;],</span>
        <span class="no">&#39;supported_by&#39;: &#39;&lt;support_group&gt;&#39;</span>
    <span class="no">}</span>
<span class="nt">NETWORK_OS</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">myos</span>
<span class="nt">RESOURCE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interfaces</span>
<span class="nt">COPYRIGHT</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Copyright 2019 Red Hat</span>
<span class="nt">LICENSE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gpl-3.0.txt</span>

<span class="nt">DOCUMENTATION</span><span class="p">:</span> <span class="p p-Indicator">|</span>
  <span class="no">module: myos_interfaces</span>
  <span class="no">version_added: 2.9</span>
  <span class="no">short_description: &#39;Manages &lt;xxxx&gt; attributes of &lt;network_os&gt; &lt;resource&gt;&#39;</span>
  <span class="no">description: &#39;Manages &lt;xxxx&gt; attributes of &lt;network_os&gt; &lt;resource&gt;.&#39;</span>
  <span class="no">author: Ansible Network Engineer</span>
 <span class="nt">notes</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="s">&#39;Tested</span><span class="nv"> </span><span class="s">against</span><span class="nv"> </span><span class="s">&lt;network_os&gt;</span><span class="nv"> </span><span class="s">&lt;version&gt;&#39;</span>
 <span class=" -Error"> </span><span class="nt">options</span><span class="p">:</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">The provided configuration</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">list</span>
      <span class="nt">elements</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">dict</span>
      <span class="nt">suboptions</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span>
          <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">str</span>
          <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">The name of the &lt;resource&gt;</span>
        <span class="nt">some_string</span><span class="p">:</span>
          <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">str</span>
          <span class="nt">description</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">The some_string_01</span>
          <span class="nt">choices</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">choice_a</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">choice_b</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">choice_c</span>
          <span class="nt">default</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">choice_a</span>
        <span class="nt">some_bool</span><span class="p">:</span>
          <span class="nt">description</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">The some_bool.</span>
          <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bool</span>
        <span class="nt">some_int</span><span class="p">:</span>
          <span class="nt">description</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">The some_int.</span>
          <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">int</span>
          <span class="nt">version_added</span><span class="p">:</span> <span class="s">&#39;1.1&#39;</span>
        <span class="nt">some_dict</span><span class="p">:</span>
          <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">dict</span>
          <span class="nt">description</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">The some_dict.</span>
          <span class="nt">suboptions</span><span class="p">:</span>
            <span class="nt">property_01</span><span class="p">:</span>
              <span class="nt">description</span><span class="p">:</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">The property_01</span>
              <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">str</span>
    <span class="nt">state</span><span class="p">:</span>
      <span class="nt">description</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">The state of the configuration after module completion.</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">str</span>
      <span class="nt">choices</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">merged</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">replaced</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">overridden</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">deleted</span>
      <span class="nt">default</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">merged</span>
<span class="nt">EXAMPLES</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">deleted_example_01.txt</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">merged_example_01.txt</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">overridden_example_01.txt</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">replaced_example_01.txt</span>
</pre></div>
</div>
<p>Notice that you should include examples for each of the states that the resource supports. The resource module builder also includes these in the sample model.</p>
<p>See <a class="reference external" href="https://github.com/ansible-network/resource_module_models">Ansible network resource models</a> for more examples.</p>
</div>
<div class="section" id="using-the-resource-module-builder">
<h2><a class="toc-backref" href="#id3">Using the resource module builder</a><a class="headerlink" href="#using-the-resource-module-builder" title="Permalink to this headline">¶</a></h2>
<p>To use the resource module builder to create a collection scaffold from your resource model:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-playbook -e <span class="nv">rm_dest</span><span class="o">=</span>&lt;destination <span class="k">for</span> modules and module utils&gt; <span class="se">\</span>
                 -e <span class="nv">structure</span><span class="o">=</span>collection <span class="se">\</span>
                 -e <span class="nv">collection_org</span><span class="o">=</span>&lt;collection_org&gt; <span class="se">\</span>
                 -e <span class="nv">collection_name</span><span class="o">=</span>&lt;collection_name&gt; <span class="se">\</span>
                 -e <span class="nv">model</span><span class="o">=</span>&lt;model&gt; <span class="se">\</span>
                 site.yml
</pre></div>
</div>
<p>Where the parameters are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rm_dest</span></code>: The directory where the resource module builder places the files and directories for the resource module and facts modules.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">structure</span></code>: The directory layout type (role or collection)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">role</span></code>: Generate a role directory layout.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">collection</span></code>: Generate a collection directory layout.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">collection_org</span></code>: The organization of the collection, required when <cite>structure=collection</cite>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">collection_name</span></code>: The name of the collection, required when <cite>structure=collection</cite>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">model</span></code>: The path to the model file.</p></li>
</ul>
<p>To use the resource module builder to create a role scaffold:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-playbook -e <span class="nv">rm_dest</span><span class="o">=</span>&lt;destination <span class="k">for</span> modules and module utils&gt; <span class="se">\</span>
                 -e <span class="nv">structure</span><span class="o">=</span>role <span class="se">\</span>
                 -e <span class="nv">model</span><span class="o">=</span>&lt;model&gt; <span class="se">\</span>
                 site.yml
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id4">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="collection-directory-layout">
<h3><a class="toc-backref" href="#id5">Collection directory layout</a><a class="headerlink" href="#collection-directory-layout" title="Permalink to this headline">¶</a></h3>
<p>This example shows the directory layout for the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">network_os</span></code>: myos</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resource</span></code>: interfaces</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-playbook -e <span class="nv">rm_dest</span><span class="o">=</span>~/github/rm_example <span class="se">\</span>
                 -e <span class="nv">structure</span><span class="o">=</span>collection <span class="se">\</span>
                 -e <span class="nv">collection_org</span><span class="o">=</span>cidrblock <span class="se">\</span>
                 -e <span class="nv">collection_name</span><span class="o">=</span>my_collection <span class="se">\</span>
                 -e <span class="nv">model</span><span class="o">=</span>models/myos/interfaces/myos_interfaces.yml <span class="se">\</span>
                 site.yml
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>├── docs
├── LICENSE.txt
├── playbooks
├── plugins
|   ├── action
|   ├── filter
|   ├── inventory
|   ├── modules
|   |   ├── __init__.py
|   |   ├── myos_facts.py
|   |   └──  myos_interfaces.py
|   └──  module_utils
|       ├── __init__.py
|       └──  network
|           ├── __init__.py
|           └──  myos
|               ├── argspec
|               |   ├── facts
|               |   |   ├── facts.py
|               |   |   └──  __init__.py
|               |   ├── __init__.py
|               |   └──  interfaces
|               |       ├── __init__.py
|               |       └──  interfaces.py
|               ├── config
|               |   ├── __init__.py
|               |   └──  interfaces
|               |       ├── __init__.py
|               |       └──  interfaces.py
|               ├── facts
|               |   ├── facts.py
|               |   ├── __init__.py
|               |   └──  interfaces
|               |       ├── __init__.py
|               |       └──  interfaces.py
|               ├── __init__.py
|               └──  utils
|                   ├── __init__.py
|                   └──  utils.py
├── README.md
└──  roles
</pre></div>
</div>
</div>
<div class="section" id="role-directory-layout">
<h3><a class="toc-backref" href="#id6">Role directory layout</a><a class="headerlink" href="#role-directory-layout" title="Permalink to this headline">¶</a></h3>
<p>This example displays the role directory layout for the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">network_os</span></code>: myos</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resource</span></code>: interfaces</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-playbook -e <span class="nv">rm_dest</span><span class="o">=</span>~/github/rm_example/roles/my_role <span class="se">\</span>
                 -e <span class="nv">structure</span><span class="o">=</span>role <span class="se">\</span>
                 -e <span class="nv">model</span><span class="o">=</span>models/myos/interfaces/myos_interfaces.yml <span class="se">\</span>
                 site.yml
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>roles
└── my_role
    ├── library
    │   ├── __init__.py
    │   ├── myos_facts.py
    │   └── myos_interfaces.py
    ├── LICENSE.txt
    ├── module_utils
    │   ├── __init__.py
    │   └── network
    │       ├── __init__.py
    │       └── myos
    │           ├── argspec
    │           │   ├── facts
    │           │   │   ├── facts.py
    │           │   │   └── __init__.py
    │           │   ├── __init__.py
    │           │   └── interfaces
    │           │       ├── __init__.py
    │           │       └── interfaces.py
    │           ├── config
    │           │   ├── __init__.py
    │           │   └── interfaces
    │           │       ├── __init__.py
    │           │       └── interfaces.py
    │           ├── facts
    │           │   ├── facts.py
    │           │   ├── __init__.py
    │           │   └── interfaces
    │           │       ├── __init__.py
    │           │       └── interfaces.py
    │           ├── __init__.py
    │           └── utils
    │               ├── __init__.py
    │               └── utils.py
    └── README.md
</pre></div>
</div>
</div>
<div class="section" id="using-the-collection">
<h3><a class="toc-backref" href="#id7">Using the collection</a><a class="headerlink" href="#using-the-collection" title="Permalink to this headline">¶</a></h3>
<p>This example shows how to use the generated collection in a playbook:</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">----</span>
<span class="l l-Scalar l-Scalar-Plain">- hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">myos101</span>
  <span class="l l-Scalar l-Scalar-Plain">gather_facts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
  <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">cidrblock.my_collection.myos_interfaces</span><span class="p">:</span>
    <span class="nt">register</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result</span>
  <span class="p p-Indicator">-</span> <span class="nt">debug</span><span class="p">:</span>
      <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result</span>
  <span class="p p-Indicator">-</span> <span class="nt">cidrblock.my_collection.myos_facts</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">debug</span><span class="p">:</span>
      <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible_network_resources</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="using-the-role">
<h3><a class="toc-backref" href="#id8">Using the role</a><a class="headerlink" href="#using-the-role" title="Permalink to this headline">¶</a></h3>
<p>This example shows how to use the generated role in a playbook:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">hosts</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">myos101</span>
  <span class="nt">gather_facts</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
  <span class="nt">roles</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">my_role</span>

<span class="p p-Indicator">-</span> <span class="nt">hosts</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">myos101</span>
  <span class="nt">gather_facts</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
  <span class="nt">tasks</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">myos_interfaces</span><span class="p">:</span>
    <span class="nt">register</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result</span>
  <span class="p p-Indicator">-</span> <span class="nt">debug</span><span class="p">:</span>
      <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result</span>
  <span class="p p-Indicator">-</span> <span class="nt">myos_facts</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">debug</span><span class="p">:</span>
      <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible_network_resources</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="resource-module-structure-and-workflow">
<h2><a class="toc-backref" href="#id9">Resource module structure and workflow</a><a class="headerlink" href="#resource-module-structure-and-workflow" title="Permalink to this headline">¶</a></h2>
<p>The resource module structure includes the following components:</p>
<dl>
<dt>Module</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">library/&lt;ansible_network_os&gt;_&lt;resource&gt;.py</span></code>.</p></li>
<li><p>Imports the <code class="docutils literal notranslate"><span class="pre">module_utils</span></code> resource package and calls <code class="docutils literal notranslate"><span class="pre">execute_module</span></code> API</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">resource_package</span><span class="o">&gt;</span><span class="p">(</span><span class="n">module</span><span class="p">)</span><span class="o">.</span><span class="n">execute_module</span><span class="p">()</span>
</pre></div>
</div>
</dd>
<dt>Module argspec</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">module_utils/&lt;ansible_network_os&gt;/argspec/&lt;resource&gt;/</span></code>.</p></li>
<li><p>Argspec for the resource.</p></li>
</ul>
</dd>
<dt>Facts</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">module_utils/&lt;ansible_network_os&gt;/facts/&lt;resource&gt;/</span></code>.</p></li>
<li><p>Populate facts for the resource.</p></li>
<li><p>Entry in <code class="docutils literal notranslate"><span class="pre">module_utils/&lt;ansible_network_os&gt;/facts/facts.py</span></code> for <code class="docutils literal notranslate"><span class="pre">get_facts</span></code> API to keep <code class="docutils literal notranslate"><span class="pre">&lt;ansible_network_os&gt;_facts</span></code> module and facts gathered for the resource module in sync for every subset.</p></li>
<li><p>Entry of Resource subset in FACTS_RESOURCE_SUBSETS list in <code class="docutils literal notranslate"><span class="pre">module_utils/&lt;ansible_network_os&gt;/facts/facts.py</span></code> to make facts collection work.</p></li>
</ul>
</dd>
<dt>Module package in module_utils</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">module_utils/&lt;ansible_network_os&gt;/&lt;config&gt;/&lt;resource&gt;/</span></code>.</p></li>
<li><p>Implement <code class="docutils literal notranslate"><span class="pre">execute_module</span></code> API that loads the configuration to device and generates the result with <code class="docutils literal notranslate"><span class="pre">changed</span></code>, <code class="docutils literal notranslate"><span class="pre">commands</span></code>, <code class="docutils literal notranslate"><span class="pre">before</span></code> and <code class="docutils literal notranslate"><span class="pre">after</span></code> keys.</p></li>
<li><p>Call <code class="docutils literal notranslate"><span class="pre">get_facts</span></code> API that returns the <code class="docutils literal notranslate"><span class="pre">&lt;resource&gt;</span></code> configuration facts or return the difference if the device has onbox diff support.</p></li>
<li><p>Compare facts gathered and given key-values if diff is not supported.</p></li>
<li><p>Generate final configuration.</p></li>
</ul>
</dd>
<dt>Utils</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">module_utils/&lt;ansible_network_os&gt;/utils</span></code>.</p></li>
<li><p>Utilities for the <code class="docutils literal notranslate"><span class="pre">&lt;ansible_network_os&gt;</span></code> platform.</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="developer-notes">
<h2><a class="toc-backref" href="#id10">Developer notes</a><a class="headerlink" href="#developer-notes" title="Permalink to this headline">¶</a></h2>
<p>The tests rely on a role generated by the resource module builder. After changes to the resource module builder, the role should be regenerated and the tests modified and run as needed. To generate the role after changes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm -rf rmb_tests/roles/my_role
ansible-playbook -e <span class="nv">rm_dest</span><span class="o">=</span>./rmb_tests/roles/my_role <span class="se">\</span>
                 -e <span class="nv">structure</span><span class="o">=</span>role <span class="se">\</span>
                 -e <span class="nv">model</span><span class="o">=</span>models/myos/interfaces/myos_interfaces.yml <span class="se">\</span>
                 site.yml
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="developing_plugins_network.html" class="btn btn-neutral float-right" title="Network connection plugins"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Developer Guide for Network Automation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','yABGvz2N8PwcwBxyfzUc','2.0.0');
</script>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 Red Hat, Inc.
      <span class="lastupdated">
        Last updated on Jul 17, 2020.
      </span>

    </p>
  </div> 
</footer>
        </div>
      </div>

    </section>

  </div>

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script>

  
  
    
   <!-- extra footer elements for Ansible beyond RTD Sphinx Theme --->
<!-- begin analytics -->
<script type="text/javascript">
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
      (function(d,s,i,r) {
      if (d.getElementById(i)){return;}
      var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
      n.id=i;n.src = '//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
      e.parentNode.insertBefore(n, e);
      })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
  _satellite.pageBottom();
}
</script> 

</body>
</html>